<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link href="../_app/immutable/entry/start.CgNUFSE4.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/D67HmYGr.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/4IrPZHSN.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/DtO_Eviy.js" rel="modulepreload">
		<link href="../_app/immutable/entry/app.BJQ5u79o.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/DLGI8Nj5.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/BT-NZ-ua.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/DGW5Jt7n.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/CIUrJAgn.js" rel="modulepreload">
		<link href="../_app/immutable/nodes/0.CYhVYnD6.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/Da9hRbz3.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/Drs9ssvA.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/iRZvYNFe.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/CCygJBpO.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/D-FhpTpP.js" rel="modulepreload">
		<link href="../_app/immutable/nodes/2.D0YC-G9g.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/C-6e0n6x.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/GBuv9Gch.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/DIixMJF5.js" rel="modulepreload">
		<link href="../_app/immutable/chunks/BY6OO56s.js" rel="modulepreload">
		<link href="../_app/immutable/nodes/6.VnZf1FjO.js" rel="modulepreload">
		<!--12qhfyh--><link rel="preconnect" href="https://fonts.googleapis.com"/> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/> <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&amp;family=JetBrains+Mono:wght@400;500;700&amp;display=swap" rel="stylesheet"/><!----><!--1sirout--><!----><title>Kiro Tutorial - chapter-03</title>
		<link href="../_app/immutable/assets/0.ePdDXWWI.css" rel="stylesheet">
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!--[--><div class="min-h-screen flex flex-col" style="background:#0a0a0a; color:#e5e5e5;"><nav class="fixed top-0 z-50 w-full border-b" style="border-color:#1a1a1a; background:rgba(10,10,10,0.85); backdrop-filter:blur(16px);"><div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8"><div class="flex h-14 items-center justify-between"><a href="../" class="flex items-center gap-2.5 group"><img src="../kiro-logo.png" alt="Kiro" class="h-7 w-7"/> <span class="text-lg font-bold tracking-tight text-white group-hover:text-red-500 transition-colors duration-200">KIRO</span></a> <div class="hidden md:flex items-center gap-1"><a href="../" class="px-3 py-1.5 rounded-md text-sm font-medium text-neutral-400 hover:text-white transition-colors">Home</a> <a href="../tutorial" class="px-3 py-1.5 rounded-md text-sm font-medium text-neutral-400 hover:text-white transition-colors">Tutorial</a> <a href="../extension" class="px-3 py-1.5 rounded-md text-sm font-medium text-neutral-400 hover:text-white transition-colors">VS Code Extension</a> <a href="https://github.com/dark-mesh/kiro-lang" target="_blank" rel="noopener noreferrer" class="ml-2 flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium text-neutral-400 hover:text-white transition-colors"><svg class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path></svg> GitHub</a></div> <button class="md:hidden p-2 rounded-md text-neutral-400 hover:text-white hover:bg-neutral-800 transition-colors" aria-label="Toggle menu"><!--[--><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg><!--]--></button></div></div> <!--[!--><!--]--></nav> <main class="flex-1 pt-14"><!--[--><!--[--><!--[--><div class="flex flex-col md:flex-row min-h-screen"><aside class="w-full md:w-60 lg:w-64 border-r overflow-y-auto md:sticky top-14 h-[calc(100vh-3.5rem)]" style="background:#0d0d0d; border-color:#1a1a1a;"><div class="p-4"><h2 class="text-xs font-bold text-neutral-500 uppercase tracking-widest mb-4 px-2">Chapters</h2> <nav class="space-y-0.5"><!--[--><a href="../tutorial/chapter-00" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 0: Installing Kiro</a><a href="../tutorial/chapter-01" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 1: The Basics</a><a href="../tutorial/chapter-02" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 2: Control Flow</a><a href="../tutorial/chapter-03" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 bg-red-600/10 text-red-400 font-medium">Chapter 3: Functions &amp; Modules</a><a href="../tutorial/chapter-04" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 4: Data Structures</a><a href="../tutorial/chapter-05" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 5: Error Handling</a><a href="../tutorial/chapter-06" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 6 (Optional): Advanced Concepts</a><a href="../tutorial/chapter-06" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 6: Async &amp; `run`</a><a href="../tutorial/chapter-07" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 7: Pipes (Channels)</a><a href="../tutorial/chapter-08" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 8: Pointers</a><a href="../tutorial/chapter-09" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 9: Host Modules (Rust Side)</a><a href="../tutorial/chapter-10" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 10: Host Modules (Kiro Side)</a><a href="../tutorial/final-project" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Final Project: Async Task Manager</a><!--]--></nav></div></aside> <main class="flex-1 min-w-0"><div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-10"><div class="prose prose-invert prose-sm max-w-none" style="--tw-prose-pre-bg:#0d0d0d;"><!--[--><!--[--><!--[--><!----><h1>Chapter 3: Functions &amp; Modules</h1>
<p>As programs grow, structure matters more than syntax. Functions let you name behavior once and reuse it everywhere. Modules let you group related behavior into files that can be imported where needed.</p>
<p>A Kiro function declares inputs and output type explicitly:</p>
<pre><code class="language-kiro">fn add(a: num, b: num) -&gt; num {
    return a + b
}

print add(2, 3)
</code></pre>
<p>That signature is a contract. Readers immediately understand what the function accepts and what it returns.</p>
<p>When branching inside a function, keep return types consistent:</p>
<pre><code class="language-kiro">fn clamp_to_zero(x: num) -&gt; num {
    on (x &lt; 0) {
        return 0
    }
    return x
}
</code></pre>
<p>Kiro also supports <code>pure fn</code> for deterministic, side-effect-free logic:</p>
<pre><code class="language-kiro">pure fn square(x: num) -&gt; num {
    return x * x
}
</code></pre>
<p>Use pure functions for computation and transformation. Keep I/O and side effects in non-pure functions.</p>
<p>Function references are now supported for named pure functions. This lets you pass behavior around without closures or lambdas.</p>
<p>A function reference is created with <code>ref</code> and a function name:</p>
<pre><code class="language-kiro">pure fn inc(x: num) -&gt; num { return x + 1 }

f = ref inc
print f(10)
</code></pre>
<p>You can type function parameters with <code>fn(...) -&gt; ...</code>:</p>
<pre><code class="language-kiro">pure fn apply(x: num, f: fn(num) -&gt; num) -&gt; num {
    return f(x)
}

print apply(5, ref inc)
</code></pre>
<p>You can also return function references:</p>
<pre><code class="language-kiro">pure fn dec(x: num) -&gt; num { return x - 1 }

pure fn pick(up: bool) -&gt; fn(num) -&gt; num {
    on (up) {
        return ref inc
    } off {
        return ref dec
    }
}
</code></pre>
<p>Current rule: function references are for named pure functions only. This keeps the model simple and predictable.</p>
<p>Modules are just <code>.kiro</code> files. Import by module name without the extension.</p>
<p><code>mylib.kiro</code>:</p>
<pre><code class="language-kiro">pure fn pi() -&gt; num {
    return 3.14
}
</code></pre>
<p><code>main.kiro</code>:</p>
<pre><code class="language-kiro">import mylib
print mylib.pi()
</code></pre>
<p>This module boundary is the foundation for larger projects.</p>
<h2>Common Pitfalls</h2>
<p>A common error is drifting return types across branches. The correct method is to decide the return type first and enforce it in every path.</p>
<p>Another issue is writing overly large functions with mixed responsibilities. The correct method is to split logic into small, single-purpose functions and compose them.</p>
<p>Function references can fail if you try to reference impure functions. The correct method is to use <code>ref</code> with named pure functions and match parameter/return signatures exactly.</p>
<p>Module organization also breaks when imports become circular. The correct method is to define clear ownership boundaries so each module has one direction of dependency.</p>
<h2>Next Step</h2>
<p>Continue with <a href="../chapter-04/04_data.md">Chapter 4: Data Structures</a>.</p>
<!----> <!--[--><div class="mt-12 border-t pt-8" style="border-color:#1a1a1a;"><h3 class="mb-2 flex items-center gap-2 text-xl font-bold text-white"><span class="text-red-500">üìÑ</span> Chapter Scripts</h3> <p class="mb-6 text-sm text-neutral-500">Full source code for this chapter. Run with <code>kiro filename.kiro</code></p> <div class="space-y-4"><!--[--><details class="group overflow-hidden rounded-xl" style="background:#0d0d0d; border:1px solid #1a1a1a;"><summary class="flex cursor-pointer items-center justify-between px-5 py-3.5 transition-colors select-none hover:bg-neutral-800/50"><div class="flex items-center gap-3"><span class="font-mono text-sm font-medium text-red-400">03_functions.kiro</span> <!--[!--><!--]--></div> <svg class="h-4 w-4 text-neutral-500 transition-transform duration-200 group-open:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></summary> <div class="border-t" style="border-color:#1a1a1a;"><pre class="!m-0 !rounded-none !border-0"><code>// Chapter 3: Functions &amp; Function References

fn shout(msg: str) {
    print msg + "!!!"
}

pure fn multiply(a: num, b: num) -> num {
    return a * b
}

pure fn inc(x: num) -> num {
    return x + 1
}

pure fn dec(x: num) -> num {
    return x - 1
}

pure fn apply(x: num, f: fn(num) -> num) -> num {
    return f(x)
}

pure fn pick(up: bool) -> fn(num) -> num {
    on (up) {
        return ref inc
    } off {
        return ref dec
    }
}

print "--- Functions ---"
shout("Kiro")

print "--- Pure Func ---"
print "3 * 4 = " + multiply(3, 4)

print "--- Function Refs ---"
f = ref inc
print apply(10, f)
g = pick(false)
print g(10)
</code></pre></div></details><details class="group overflow-hidden rounded-xl" style="background:#0d0d0d; border:1px solid #1a1a1a;"><summary class="flex cursor-pointer items-center justify-between px-5 py-3.5 transition-colors select-none hover:bg-neutral-800/50"><div class="flex items-center gap-3"><span class="font-mono text-sm font-medium text-red-400">mylib.kiro</span> <!--[!--><!--]--></div> <svg class="h-4 w-4 text-neutral-500 transition-transform duration-200 group-open:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></summary> <div class="border-t" style="border-color:#1a1a1a;"><pre class="!m-0 !rounded-none !border-0"><code>// Library Module
pure fn get_msg() -> str {
    return "Hello from Module!"
}
</code></pre></div></details><!--]--></div></div><!--]--><!--]--><!--]--><!--]--></div> <div class="mt-16 pt-6 border-t flex justify-between" style="border-color:#1a1a1a;"><!--[--><!--[--><a href="../tutorial/chapter-02" class="group flex items-center gap-2 text-neutral-500 hover:text-white text-sm transition-colors"><svg class="w-4 h-4 group-hover:-translate-x-0.5 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> <span>Control Flow</span></a><!--]--> <!--[--><a href="../tutorial/chapter-04" class="group flex items-center gap-2 text-neutral-500 hover:text-white text-sm transition-colors"><span>Data Structures</span> <svg class="w-4 h-4 group-hover:translate-x-0.5 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></a><!--]--><!--]--></div></div></main></div><!--]--><!--]--><!--]--></main> <footer class="border-t mt-auto" style="border-color:#1a1a1a;"><div class="max-w-6xl mx-auto px-4 py-8 flex flex-col sm:flex-row items-center justify-between gap-4"><p class="text-sm text-neutral-600">Built with <span class="text-red-500">‚ù§Ô∏è</span> in Rust ¬†¬∑¬† ¬© 2026 Kiro Language</p> <a href="https://github.com/dark-mesh/kiro-lang" target="_blank" rel="noopener noreferrer" class="text-neutral-600 hover:text-white transition-colors"><svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path></svg></a></div></footer></div><!--]--><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_jxpegh = {
						base: new URL("..", location).pathname.slice(0, -1),
						assets: "/kiro-lang"
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../_app/immutable/entry/start.CgNUFSE4.js"),
						import("../_app/immutable/entry/app.BJQ5u79o.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 6],
							data: [null,null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
