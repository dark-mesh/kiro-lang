<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link href="../internal/immutable/entry/start.DNUkSrs1.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/DHfEL5EQ.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/4IrPZHSN.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/DOyKqBkJ.js" rel="modulepreload">
		<link href="../internal/immutable/entry/app.DH1LUV7L.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/DLGI8Nj5.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/BT-NZ-ua.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/DGW5Jt7n.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/CIUrJAgn.js" rel="modulepreload">
		<link href="../internal/immutable/nodes/0.QWhPopkJ.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/Da9hRbz3.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/Drs9ssvA.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/iRZvYNFe.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/CCygJBpO.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/D-FhpTpP.js" rel="modulepreload">
		<link href="../internal/immutable/nodes/2.DOZd8ntw.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/C-6e0n6x.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/BUJZMVpW.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/DIixMJF5.js" rel="modulepreload">
		<link href="../internal/immutable/chunks/BY6OO56s.js" rel="modulepreload">
		<link href="../internal/immutable/nodes/6.DwmdgBGI.js" rel="modulepreload">
		<!--12qhfyh--><link rel="preconnect" href="https://fonts.googleapis.com"/> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/> <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&amp;family=JetBrains+Mono:wght@400;500;700&amp;display=swap" rel="stylesheet"/><!----><!--1sirout--><!----><title>Kiro Tutorial - chapter-09</title>
		<link href="../internal/immutable/assets/0.ePdDXWWI.css" rel="stylesheet">
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!--[--><div class="min-h-screen flex flex-col" style="background:#0a0a0a; color:#e5e5e5;"><nav class="fixed top-0 z-50 w-full border-b" style="border-color:#1a1a1a; background:rgba(10,10,10,0.85); backdrop-filter:blur(16px);"><div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8"><div class="flex h-14 items-center justify-between"><a href="../" class="flex items-center gap-2.5 group"><img src="../kiro-logo.png" alt="Kiro" class="h-7 w-7"/> <span class="text-lg font-bold tracking-tight text-white group-hover:text-red-500 transition-colors duration-200">KIRO</span></a> <div class="hidden md:flex items-center gap-1"><a href="../" class="px-3 py-1.5 rounded-md text-sm font-medium text-neutral-400 hover:text-white transition-colors">Home</a> <a href="../tutorial" class="px-3 py-1.5 rounded-md text-sm font-medium text-neutral-400 hover:text-white transition-colors">Tutorial</a> <a href="../extension" class="px-3 py-1.5 rounded-md text-sm font-medium text-neutral-400 hover:text-white transition-colors">VS Code Extension</a> <a href="https://github.com/ata-sesli/kiro-lang" target="_blank" rel="noopener noreferrer" class="ml-2 flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium text-neutral-400 hover:text-white transition-colors"><svg class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path></svg> GitHub</a></div> <button class="md:hidden p-2 rounded-md text-neutral-400 hover:text-white hover:bg-neutral-800 transition-colors" aria-label="Toggle menu"><!--[--><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg><!--]--></button></div></div> <!--[!--><!--]--></nav> <main class="flex-1 pt-14"><!--[--><!--[--><!--[--><div class="flex flex-col md:flex-row min-h-screen"><aside class="w-full md:w-60 lg:w-64 border-r overflow-y-auto md:sticky top-14 h-[calc(100vh-3.5rem)]" style="background:#0d0d0d; border-color:#1a1a1a;"><div class="p-4"><h2 class="text-xs font-bold text-neutral-500 uppercase tracking-widest mb-4 px-2">Chapters</h2> <nav class="space-y-0.5"><!--[--><a href="../tutorial/chapter-00" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 0: Installing Kiro</a><a href="../tutorial/chapter-01" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 1: The Basics</a><a href="../tutorial/chapter-02" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 2: Control Flow</a><a href="../tutorial/chapter-03" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 3: Functions &amp; Modules</a><a href="../tutorial/chapter-04" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 4: Data Structures</a><a href="../tutorial/chapter-05" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 5: Error Handling</a><a href="../tutorial/chapter-06" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 6 (Optional): Advanced Concepts</a><a href="../tutorial/chapter-06" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 6: Async &amp; `run`</a><a href="../tutorial/chapter-07" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 7: Pipes (Channels)</a><a href="../tutorial/chapter-08" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 8: Pointers</a><a href="../tutorial/chapter-09" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 bg-red-600/10 text-red-400 font-medium">Chapter 9: Host Modules (Rust Side)</a><a href="../tutorial/chapter-10" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Chapter 10: Host Modules (Kiro Side)</a><a href="../tutorial/final-project" class="block px-3 py-2 rounded-md text-sm transition-colors duration-150 text-neutral-500 hover:text-neutral-200 hover:bg-neutral-800/50">Final Project: Async Task Manager</a><!--]--></nav></div></aside> <main class="flex-1 min-w-0"><div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-10"><div class="prose prose-invert prose-sm max-w-none" style="--tw-prose-pre-bg:#0d0d0d;"><!--[--><!--[--><!--[--><!----><h1>Chapter 9: Host Modules (Rust Side)</h1>
<p>Kiro is designed to be extensible through host functions implemented in Rust. This allows you to keep high-level logic in Kiro while delegating system access and ecosystem integration to Rust code.</p>
<p>When Kiro declares a <code>rust fn</code>, the runtime expects a matching Rust implementation. The Rust function typically receives runtime values, validates/converts them, performs work, and returns either a runtime value or a structured error.</p>
<pre><code class="language-rust">use kiro_runtime::{RuntimeVal, KiroError};

pub async fn read_file(args: Vec&lt;RuntimeVal&gt;) -&gt; Result&lt;RuntimeVal, KiroError&gt; {
    let path = args[0].as_str()?;
    let content = std::fs::read_to_string(path)
        .map_err(|e| KiroError::new(&amp;format!(&quot;read_file failed: {}&quot;, e)))?;

    Ok(RuntimeVal::Str(content))
}
</code></pre>
<p>The practical workflow is consistent: decode arguments, execute Rust logic, map success to <code>RuntimeVal</code>, map failures to <code>KiroError</code>.</p>
<p>Keep host functions narrow in scope. Small host surfaces are easier to test, easier to review, and safer to evolve as language features grow.</p>
<h2>Common Pitfalls</h2>
<p>A frequent integration failure is declaring host functions in Kiro but omitting Rust glue. The correct method is to treat declaration and implementation as one change set and verify both in the same run.</p>
<p>Another issue is trusting argument shape without validation. The correct method is to convert and check each runtime argument before use and return explicit errors for invalid input.</p>
<p>Panic-driven host code is also brittle. The correct method is to convert all expected failure paths into structured <code>KiroError</code> values.</p>
<h2>Next Step</h2>
<p>Continue with <a href="../chapter-10/10_host_kiro.md">Chapter 10: Host Modules (Kiro Side)</a>.</p>
<!----> <!--[!--><!--]--><!--]--><!--]--><!--]--></div> <div class="mt-16 pt-6 border-t flex justify-between" style="border-color:#1a1a1a;"><!--[--><!--[--><a href="../tutorial/chapter-08" class="group flex items-center gap-2 text-neutral-500 hover:text-white text-sm transition-colors"><svg class="w-4 h-4 group-hover:-translate-x-0.5 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> <span>Pointers</span></a><!--]--> <!--[--><a href="../tutorial/chapter-10" class="group flex items-center gap-2 text-neutral-500 hover:text-white text-sm transition-colors"><span>Host Modules (Kiro Side)</span> <svg class="w-4 h-4 group-hover:translate-x-0.5 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></a><!--]--><!--]--></div></div></main></div><!--]--><!--]--><!--]--></main> <footer class="border-t mt-auto" style="border-color:#1a1a1a;"><div class="max-w-6xl mx-auto px-4 py-8 flex flex-col sm:flex-row items-center justify-between gap-4"><p class="text-sm text-neutral-600">Built with <span class="text-red-500">❤️</span> in Rust  ·  © 2026 Kiro Language</p> <a href="https://github.com/ata-sesli/kiro-lang" target="_blank" rel="noopener noreferrer" aria-label="GitHub" class="text-neutral-600 hover:text-white transition-colors"><svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path></svg></a></div></footer></div><!--]--><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_1x2izdd = {
						base: new URL("..", location).pathname.slice(0, -1),
						assets: "/kiro-lang"
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../internal/immutable/entry/start.DNUkSrs1.js"),
						import("../internal/immutable/entry/app.DH1LUV7L.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 6],
							data: [null,null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
